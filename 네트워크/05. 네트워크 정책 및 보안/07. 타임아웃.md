## 타임아웃의 개념

타임아웃은 시스템이 특정한 이벤트나 작업을 무한정 기다리지 않도록 하는 메커니즘이다. 주로 미리 정해진 시간 후에 발생하도록 설계된 강제된 사건이나, 프로그램이 특정 시간 내에 성공적으로 수행되지 않아 자동으로 중단되는 것으로 접할 수 있다.

타임아웃은 일반적으로 네트워크 통신이나 DB 연결 등 통신과 관련된 문제를 해결하기 위해 사용하거나, 일정 시간 후 장치를 끄는 등 에너지 절약을 위해 활용된다.

### 필요성

- **시스템 안정성**: 무한 대기 상태를 방지하여 시스템의 안정성을 향상시킨다.
- **오류 처리**: 네트워크 문제나 서버 장애 등의 특수 상황에서 적절한 대응이 가능하도록 만들 수 있다.
- **사용자 경험 개선**: 응답을 무한정 기다리지 않고 적절한 피드백을 제공할 수 있다.

## 커넥션 타임아웃(Connection Timeout)

**커넥션 타임아웃은 client가 server와 연결을 시도할 때 발생하는 타임아웃을 말한다.** 자세히 말하면 TCP 3-Way Handshake 과정이 정상적으로 수행되어 server에 연결되기까지 소요된 시간을 의미한다.

커넥션 타임아웃을 적절히 설정하면 시스템의 안정성과 성능을 향상시킬 수 있다. 하지만 너무 짧게 설정하면 불필요한 타임아웃이 발생할 수 있으며, 너무 길게 설정하면 사용 시 불편함을 쉽게 느낄 수 있기 때문에 적절한 수치를 잡는 것을 목표로 해야 한다.

### 주요 발생 원인

- **방화벽에 막힘**: client의 IP가 server의 방화벽에 막혀 허용되지 않는 경우
- **서버 과부하**: server가 너무 바빠서 추가적인 커넥션 요청을 처리할 수 없는 경우
- **서버 다운**: 접속하려는 서버 프로그램이 작동하지 않거나 재기동 중인 경우
- **네트워크 문제**: client와 server 사이의 네트워크가 불안정한 경우

### 설정 방법

커넥션 타임아웃은 일반적으로 client 측에서 설정한다. 예를 들어 java의 `HttpClient` 객체를 사용해서 다음과 같이 설정할 수 있다:
```java
RequestConfig requestConfig = RequestConfig.custom()
    .setConnectTimeout(5000)  // 5초로 설정
    .build();
```

### 사용 사례

- **WAS**: client가 server에 HTTP 요청을 보낼 때 사용
- **DB 연결**: JDBC 드라이버를 사용하여 DB에 연결할 때 적용됨
- **소켓 프로그래밍**: 네트워크 소켓을 활용한 통신에서 사용됨

## 리드 타임아웃(Read Timeout)

**리드 타임아웃은 client와 server 간 연결이 이미 성립된 상태에서 발생하는 타임아웃이다.** client가 server와 연결은 되어 있지만, server로부터 데이터를 읽으려고 시도할 때 I/O 작업이 지연되거나 처리되지 못하여 일정 시간 내에 데이터를 받지 못하면 발생한다. 

리드 타임아웃은 일반적으로 커넥션 타임아웃보다 더 짧게 설정하는데, RTO와 RTT를 통해 계산한 통신 시간이 보통 1초보다 더 짧기 때문이다.

### 발생 원인

- server의 요청 처리 지연
- 대량 데이터 전송 중 지연
- 네트워크 성능 저하 또는 패킷의 손실
- server의 lock 처리로 인해 발생하는 지연

### 설정 방법

리드 타임아웃도 일반적으로 클라이언트 측에서 설정한다. 예를 들어 Java의 `RestTemplate` 객체를 사용하여 설정 가능하다:
```java
RestTemplate restTemplate = new RestTemplateBuilder()
    .setReadTimeout(Duration.ofMinutes(1))
    .build();
```

### 사용 사례

- **WAS**: client가 server로부터 대량의 데이터를 다운로드할 때 사용됨
- **API 통신**: server가 외부 API와 통신할 때 응답 대기 시간을 제한하는데 사용
- **DB query**: 장시간 실행되는 query의 timeout을 설정하는데 사용됨