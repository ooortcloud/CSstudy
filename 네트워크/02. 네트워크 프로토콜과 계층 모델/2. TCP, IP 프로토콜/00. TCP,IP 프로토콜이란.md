## TCP/IP 개념

**TCP/IP는 패킷 통신 방식의 인터넷 프로토콜인 IP와 전송 조절 프로토콜인 TCP로 이루어져 있다.** IP의 경우에는 패킷 전달 여부를 보증하지 않기 때문에, 패킷을 보낸 순서와 받는 순서가 다를 수 있다. 반면 TCP는 IP 위에서 동작하는 프로토콜로, 데이터의 전달을 보증하고 보낸 순서대로 받게 하는 역할을 한다. 수많은 어플리케이션 프로토콜들은 TCP를 기반으로 한 IP 위에서 동작하기 때문에, TCP/IP로 묶어서 부르는 것이 관행이 됐다.

### Layer로 이해하기

이들은 너무 유명한 프로토콜이기 때문에 OSI 7 계층에서 이들을 많이 참고한 것 같다. 따라서 OSI 7 계층에서 각 계층의 목적만 살펴보면 이들이 무엇을 수행하는지 쉽게 파악할 수 있다.

**Network Layer(L3)**

**네트워크 계층에서는 routing을 기반으로 packet들이 적절한 목적지에 도달할 수 있도록 돕는 역할을 수행한다.** routing이란, 한 endpoint에서 다른 endpoint로 packet을 전송하면 router에서 적절한 경로와 목적지를 찾아주는 기능이다. 이 계층에서는 packet 간의 관계를 이해하지 않으며, 오직 각 packet을 목적지까지 제대로 보내는 것에만 중점을 둔다. IP가 네트워크 계층의 대표적인 프로토콜이다.

**Transport Layer(L4)**

**송신자와 수신자의 논리적 연결을 담당하는 부분으로, 신뢰성 있는 연결을 유지할 수 있도록 돕는다.** endpoint 간의 연결을 생성하고 데이터를 얼마나 주고 받았는지, 그리고 모든 데이터를 누락이나 변질없이 제대로 받았는지 등을 모니터링한다. TCP와 UDP가 전송 계층의 대표적인 프로토콜이다.

## TCP/IP 작동 방식

<p align="center">
  <img width="50%" height="50%" src="../../../이미지 폴더/네트워크/3_way_handshake.png">
</p>

TCP로 이뤄지는 통신을 수행하려면 반드시 먼저 3-way handshake 과정을 수행해야 한다. 

1. 송신자가 수신자에게 'SYN'을 전송하여 통신이 가능한지를 확인한다. 이때 송신자와 수신자의 port가 모두 정상적으로 개방되어 있어야 한다.
2. 수신자가 송신자로부터 SYN을 받으면, 수신자는 송신자에게 'SYN/ACK'를 전송하여 통신 준비가 되어 있음을 알린다.
3. 송신자가 수신자로부터 SYN/ACK를 받으면, 송신자는 수신자에게 'ACK'를 전송하여 둘 사이에 연결을 생성함을 알린다.