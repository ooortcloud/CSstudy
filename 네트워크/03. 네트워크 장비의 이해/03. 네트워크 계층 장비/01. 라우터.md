## 라우터 개념

**라우터(Router)는 여러 근거리 통신망들을 광역 네트워크에 연결하여 네트워크 간 데이터 packet을 전달하는 장치이다.** IP 주소를 기반으로 packet의 최적 경로를 결정하여 목적지까지 전송한다.

**장점**

- 서로 다른 근거리 통신망을 효과적으로 연결.
- 최적 경로 선택으로 네트워크 트래픽을 효율적으로 관리.
- 방화벽, VPN 등의 보안 기능을 제공.
- 다양한 프로토콜과 네트워크 유형을 지원.

**단점**

- 고급 기능을 갖춘 라우터는 비용이 비쌀 수 있음.
- 설정과 관리가 복잡해서 전문 지식이 필요.
- 대규모 네트워크에서는 병목 현상이 발생할 수 있음.
- packet 검사와 routing 결정 과정에서 지연이 발생할 수 있음.

## 동작 방식

1. 패킷 수신:
   - 라우터는 네트워크 인터페이스를 통해 데이터 패킷을 수신합니다.
   - 수신된 패킷의 헤더 정보를 분석하여 목적지 IP 주소를 확인합니다.

2. 라우팅 테이블 참조:
   - 라우터는 내부 라우팅 테이블을 참조하여 목적지 IP 주소에 대한 최적의 경로를 결정합니다.
   - 라우팅 테이블에는 네트워크 목적지, 다음 홉(next hop) 주소, 인터페이스 정보 등이 포함되어 있습니다.

3. 경로 결정:
   - 라우팅 테이블에서 가장 일치하는(longest prefix match) 경로를 선택합니다.
   - 정확히 일치하는 경로가 없을 경우, 가장 유사한 경로를 선택합니다.

4. 패킷 처리:
   - 선택된 경로에 따라 패킷의 TTL(Time To Live) 값을 감소시킵니다.
   - 필요한 경우 패킷의 헤더 정보를 수정합니다(예: NAT 수행).

5. 패킷 전송:
   - 결정된 경로의 다음 홉으로 패킷을 전송합니다.
   - 패킷은 적절한 출력 인터페이스를 통해 전송됩니다.

6. 브로드캐스트 제어:
   - 목적지 주소가 라우팅 테이블에 없는 경우, 패킷을 폐기하여 불필요한 브로드캐스트를 방지합니다.

7. 프로토콜 변환:
   - 필요한 경우, 패킷의 2계층(데이터 링크 계층) 헤더를 새로운 네트워크 환경에 맞게 변경합니다.

8. 트래픽 관리:
   - QoS(Quality of Service) 정책에 따라 패킷의 우선순위를 조정합니다.
   - 필요에 따라 트래픽을 제어하거나 대역폭을 할당합니다.

9. 보안 기능:
   - 방화벽 규칙이나 ACL(Access Control List)을 적용하여 패킷을 필터링합니다.
   - VPN 터널링 등의 보안 기능을 수행합니다.

10. 라우팅 정보 교환:
    - 다른 라우터와 주기적으로 라우팅 정보를 교환하여 라우팅 테이블을 업데이트합니다(동적 라우팅의 경우).


## 세부 용어 정리(간단하게)

### 네트워크 패킷(Network Packet)

**네트워크 패킷(Network packet)은 컴퓨터 네트워크를 통해 전송되는 데이터의 기본 단위이다.** 패킷은 일반적으로 header, payload, 그리고 trailer로 구성된다. header에는 출발지와 목적지 주소, 프로토콜 정보 등의 제어 정보가 포함되며, payload는 실제 전송하려는 데이터 내용이 담겨 있다. 마지막으로 trailer는 오류 검출을 위한 정보들이 담겨 있다. packet 방식을 사용하면 대용량 데이터를 작은 단위로 나누어 효율적으로 전송할 수 있고, 네트워크 자원을 최적화하며, 오류 발생 시 해당 패킷만 재전송할 수 있어 효율적이다. 각 packet은 독립적으로 전송되며, 목적지에서 재조립되어 원본 데이터로 복원된다. 이러한 특성으로 인해 packet은 현대 인터넷 통신의 핵심 요소로 자리 잡고 있다.

### VPN(Virtual Private Network)
**공용 인터넷에서 안전한 사설 네트워크 연결을 생성하는 기술.** VPN 내에서는 모든 인터넷 트래픽을 암호화하여 데이터 탈취를 무의미하게 만들고, 사용자의 실제 IP 주소를 VPN 서버의 IP 주소로 대체하여 위치 추적을 어렵게 하는 엄청난 장점을 갖는다.

### 라우팅 테이블(Routing Table)

**라우팅 테이블(Routing table)은 라우터가 데이터 패킷을 목적지로 효율적으로 전송하기 위해 사용하는 테이블이다.** 이 테이블에는 목적지 네트워크 주소, 해당 네트워크로 가기 위한 다음 홉(next hop) 라우터의 주소, 목적지까지의 거리(메트릭), 그리고 패킷을 전송할 인터페이스 등의 정보가 포함되어 있다. 라우터는 수신한 패킷의 목적지 IP 주소를 라우팅 테이블과 비교하여 최적의 경로를 결정하고, 그에 따라 패킷을 전달한다. 라우팅 테이블은 정적으로 구성되거나 동적 라우팅 프로토콜을 통해 자동으로 업데이트될 수 있다.

### TTL(Time To Live)

**TTL(Time To Live)은 패킷이 네트워크를 통과할 수 있는 최대 홉(라우터) 수를 나타낸다.** IP 패킷 헤더에 포함되어 있으며, 각 라우터를 통과할 때마다 1씩 감소한다. TTL이 0이 되면 패킷은 폐기되고 발신자에게 ICMP 메시지가 전송된다. 이 메커니즘은 패킷이 네트워크에서 무한히 순환하는 것을 방지하고, 네트워크 혼잡을 줄이며, 라우팅 루프를 탐지하는 데 도움을 준다. 또한 TTL은 DNS 캐싱에서도 사용되어, DNS 레코드가 캐시에 저장되는 시간을 제어한다. 참고로 운영 체제마다 기본 TTL 값이 다르기 때문에, 네트워크 관리자는 송신 시스템의 운영 체제를 추측할 수 있다.

### QoS(Quality of Service)

**QoS(Quality of Service)는 특정 유형의 데이터 트래픽에 우선순위를 부여하고 관리하는 기술이다.** 네트워크 리소스를 효율적으로 사용하여 중요한 애플리케이션과 서비스의 성능을 보장하는 것을 목표로 한다. QoS는 패킷 손실, 지연, 지터(Jitter) 등을 최소화하고 대역폭을 최적화하여 음성, 비디오, 실시간 데이터 등 시간에 민감한 트래픽의 품질을 유지한다. 이를 통해 네트워크 관리자는 다양한 애플리케이션의 요구사항을 충족시키고, 사용자 경험을 향상시킬 수 있다. QoS는 트래픽 분류, 우선순위 지정, 대역폭 할당 등의 메커니즘을 사용하여 구현되며, 특히 네트워크 혼잡 상황에서 중요한 역할을 한다.

### ACL(Access Control List)

**ACL(Access Control List)은 네트워크 장치(ex. 라우터, 스위치, 방화벽)에서 트래픽을 필터링하고 접근을 제어하는 데 사용되는 규칙의 집합이다.** ACL은 출발지 IP 주소, 목적지 IP 주소, 프로토콜 유형, 포트 번호 등의 기준을 바탕으로 패킷을 허용하거나 거부할 수 있다. 표준 ACL은 주로 출발지 IP 주소만을 기반으로 하는 반면, 확장 ACL은 더 세밀한 제어를 위해 여러 기준을 사용한다. ACL은 네트워크 보안 강화, 특정 서비스에 대한 접근 제한, 트래픽 흐름 제어 등 다양한 목적으로 사용되며, 효과적인 네트워크 관리와 보안 정책 구현에 필수적인 요소이다.

### 동적 라우팅(Dynamic Routing)

**동적 라우팅(Dynamic Routing)은 네트워크 상황에 따라 자동으로 최적의 경로를 결정하고 업데이트하는 라우팅 방식이다.** 라우터가 주기적으로 또는 네트워크 변화 시 라우팅 정보를 교환하여 라우팅 테이블을 동적으로 갱신한다. 주로 RIP, OSPF, BGP 등의 라우팅 프로토콜을 사용하며, 네트워크 토폴로지 변화에 유연하게 대응할 수 있다. 동적 라우팅은 대규모 네트워크에서 효율적이며, 네트워크 관리자의 수동 개입을 최소화하고 네트워크 확장성을 향상시킨다. 그러나 정적 라우팅에 비해 더 많은 처리 능력과 대역폭을 요구하며, 복잡한 네트워크 환경에서는 설정과 관리가 더 어려울 수 있다.
