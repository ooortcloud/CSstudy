## 복합 인덱스(Composite Index)란?

복합 인덱스는 **두 개 이상의 컬럼을 조합하여 생성된 인덱스**를 의미합니다. 마치 사전의 찾아보기에서 여러 단어를 조합하여 찾는 것처럼, 복합 인덱스는 여러 컬럼을 기준으로 데이터를 빠르게 찾을 수 있도록 도와줍니다. 

**왜 복합 인덱스를 사용할까요?**

* **복합 조건 검색:** 여러 컬럼을 조건으로 하는 쿼리를 수행할 때, 복합 인덱스를 사용하면 쿼리 성능을 크게 향상시킬 수 있습니다.
* **정렬 및 그룹화:** 복합 인덱스는 여러 컬럼을 기준으로 데이터를 정렬하거나 그룹화할 때 유용합니다.

**복합 인덱스의 예시**

```sql
CREATE INDEX idx_customer_name_city ON customers (name, city);
```

위 쿼리는 `customers` 테이블의 `name`과 `city` 컬럼을 기반으로 복합 인덱스를 생성합니다. 이 인덱스를 사용하면 `name`과 `city` 컬럼을 조합한 검색 조건을 빠르게 처리할 수 있습니다.

**복합 인덱스를 사용할 때 주의할 점**

* **컬럼 순서:** 인덱스에 포함되는 컬럼의 순서는 매우 중요합니다. 쿼리에서 가장 자주 사용되는 컬럼을 앞쪽에 배치하는 것이 일반적입니다.
* **선택도:** 모든 컬럼에 대해 인덱스를 생성하는 것은 오히려 성능 저하를 야기할 수 있습니다. 자주 사용되는 컬럼 조합에 대해서만 인덱스를 생성해야 합니다.
* **중복된 값:** 인덱스의 첫 번째 컬럼에 중복된 값이 많으면 인덱스 효율이 떨어질 수 있습니다.

**복합 인덱스 활용 시 주의사항**

* **복합 인덱스는 모든 경우에 효과적이지 않습니다.** 쿼리 패턴에 따라 다른 인덱스 전략이 필요할 수 있습니다.
* **복합 인덱스는 추가적인 저장 공간을 차지**합니다.
* **복합 인덱스를 너무 많이 생성하면 데이터베이스 성능이 저하될 수 있습니다.**

**복합 인덱스를 효과적으로 사용하기 위한 팁**

* **쿼리 분석:** 쿼리를 분석하여 자주 사용되는 컬럼 조합을 파악합니다.
* **인덱스 시뮬레이션:** 데이터베이스 시스템에서 제공하는 인덱스 시뮬레이션 기능을 활용하여 인덱스 생성 전에 성능을 예측합니다.
* **정기적인 검토:** 데이터베이스 사용 패턴이 변경되면 인덱스도 함께 변경해야 할 수 있습니다.

**복합 인덱스의 예시**

* **고객 정보 검색:** `customers` 테이블에 `name`, `city`, `age` 컬럼이 있다고 가정할 때, `(name, city)` 컬럼에 대한 복합 인덱스를 생성하면 특정 도시에 사는 특정 이름의 고객을 빠르게 찾을 수 있습니다.
* **주문 정보 검색:** `orders` 테이블에 `customer_id`, `order_date`, `product_id` 컬럼이 있다고 가정할 때, `(customer_id, order_date)` 컬럼에 대한 복합 인덱스를 생성하면 특정 고객의 주문 내역을 시간순으로 조회할 수 있습니다.

**결론적으로 복합 인덱스는 다양한 컬럼을 조합하여 데이터를 검색하는 데 효율적인 도구입니다.** 하지만 잘못된 복합 인덱스는 오히려 성능 저하를 야기할 수 있으므로, 쿼리 패턴과 데이터 특성을 고려하여 신중하게 설계해야 합니다.

**더 궁금한 점이 있다면 언제든지 질문해주세요.**

* **추가적으로 알아두면 좋은 것:**
    * **선도 컬럼:** 복합 인덱스에서 가장 먼저 검색되는 컬럼
    * **리딩 컬럼:** 쿼리에서 가장 많이 사용되는 컬럼
    * **인덱스 키 길이:** 인덱스 키의 최대 길이 제한

추천 글

- [복합 인덱스의 이해와 활용](https://f-lab.kr/insight/understanding-composite-indexes)