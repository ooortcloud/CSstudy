`인터럽트(Interrupt)`는 컴퓨터 시스템에서 발생하는 중요한 이벤트를 처리하기 위해 현재 실행 중인 작업을 일시적으로 중단하고, 해당 이벤트를 처리한 후 다시 원래 작업을 재개하는 메커니즘입니다. 인터럽트는 하드웨어와 소프트웨어 모두에서 발생할 수 있으며, 시스템의 효율적이고 신속한 처리를 가능하게 하는 핵심 개념입니다.

### 1. 인터럽트의 기본 개념

**정의**: 인터럽트는 시스템 내에서 발생한 특정 사건(예: 하드웨어 오류, 입출력 작업 완료 등)을 운영체제에 알리고, 이 사건을 즉시 처리할 수 있도록 하는 신호입니다.

**역할**: 현재 실행 중인 작업을 중단하고 인터럽트 처리 루틴을 실행한 후, 다시 중단된 작업으로 돌아가는 과정에서 사용됩니다. 이를 통해 시스템은 실시간으로 중요한 이벤트에 반응할 수 있습니다.

### 2. 인터럽트의 종류

인터럽트는 발생 원인에 따라 여러 종류로 분류됩니다:

#### 1) 하드웨어 인터럽트 (Hardware Interrupt)
   - **정의**: 하드웨어 장치(예: 키보드, 마우스, 네트워크 카드 등)에서 발생하는 인터럽트로, 하드웨어가 CPU에 특정 작업을 요청할 때 발생합니다.
   - **예**:
     - **타이머 인터럽트**: 시스템 타이머가 일정 시간이 지났음을 CPU에 알리는 인터럽트입니다. 주로 프로세스 스케줄링에 사용됩니다.
     - **입출력 인터럽트**: 하드디스크나 네트워크 카드 같은 입출력 장치가 데이터 전송이 완료되었음을 알리는 인터럽트입니다.

#### 2) 소프트웨어 인터럽트 (Software Interrupt) = 트랩(Trap)
   - **정의**: 소프트웨어에 의해 발생하는 인터럽트로, 주로 운영체제 기능을 호출할 때 사용됩니다. 이 인터럽트는 의도적으로 발생시켜 시스템 호출을 처리하거나 예외 상황을 관리합니다.
   - **예**:
     - **시스템 호출**: 프로그램이 운영체제의 기능을 요청하기 위해 발생시키는 인터럽트입니다.
     - **예외 처리**: 프로그램 실행 중 오류(예: 나누기 0 오류, 잘못된 메모리 접근 등)가 발생할 때 발생하는 인터럽트입니다.

#### 3) 인터럽트 요청(IRQ, Interrupt Request)
   - **정의**: 하드웨어 인터럽트를 발생시키기 위해 하드웨어 장치가 CPU에 보내는 신호입니다.
   - **예**: 각 하드웨어 장치는 고유한 IRQ 라인을 통해 CPU에 신호를 보낼 수 있습니다. 예를 들어, 키보드와 마우스는 서로 다른 IRQ 라인을 사용하여 CPU와 통신합니다.

### 3. 인터럽트 처리 과정

인터럽트가 발생하면 CPU는 다음과 같은 단계를 거쳐 이를 처리합니다:

1. **인터럽트 발생**: 하드웨어 장치나 소프트웨어가 인터럽트를 발생시킵니다.
2. **인터럽트 요청 확인**: CPU는 실행 중인 작업을 잠시 멈추고, 인터럽트 요청(IRQ)을 확인합니다.
3. **현재 작업 저장**: CPU는 현재 실행 중인 작업의 상태(레지스터 값 등)를 저장하여, 인터럽트 처리 후 작업을 재개할 수 있도록 합니다.
4. **인터럽트 벡터 테이블 참조**: CPU는 '인터럽트 벡터 테이블'이라는 메모리 영역을 참조하여, 발생한 인터럽트에 대응하는 인터럽트 처리 루틴(Interrupt Service Routine, ISR)의 주소를 찾습니다.
5. **인터럽트 처리 루틴 실행**: CPU는 해당 ISR을 실행하여 인터럽트를 처리합니다. 예를 들어, 키보드 인터럽트의 경우 키보드로부터 입력된 데이터를 처리하는 루틴이 실행됩니다.
6. **작업 복원 및 재개**: 인터럽트 처리가 완료되면, CPU는 저장된 작업 상태를 복원하고 중단된 작업을 재개합니다.

#### 인터럽트 벡터 테이블

`인터럽트 벡터 테이블`은 컴퓨터 시스템에서 발생하는 다양한 **인터럽트**에 대한 **처리 루틴**의 **주소**를 모아 놓은 **테이블**입니다. 마치 전화번호부에서 전화번호를 찾듯이, 시스템은 발생한 인터럽트의 종류에 따라 이 테이블을 참조하여 해당 인터럽트를 처리할 적절한 루틴을 찾아 실행합니다.

**인터럽트 테이블을 사용하는 이유**

* **효율적인 인터럽트 처리:** 인터럽트가 발생하면 시스템은 일시적으로 현재 작업을 중단하고 인터럽트 처리 루틴으로 넘어가야 합니다. 이때 인터럽트 벡터 테이블을 통해 빠르게 해당 루틴을 찾아 실행함으로써 시스템의 응답성을 높일 수 있습니다.
* **다양한 인터럽트 관리:** 하드웨어 장치, 소프트웨어 오류 등 다양한 원인으로 인해 다양한 종류의 인터럽트가 발생할 수 있습니다. 인터럽트 벡터 테이블은 이러한 다양한 인터럽트를 효율적으로 관리하고 처리할 수 있는 체계를 제공합니다.
* **모듈화된 시스템 설계:** 각 인터럽트 처리 루틴을 독립적인 모듈로 구성함으로써 시스템을 모듈화하고 유지보수를 용이하게 합니다.

**예시**

* **하드 디스크 인터럽트:** 하드 디스크에서 데이터 읽기/쓰기 작업이 완료되면 하드 디스크 컨트롤러는 인터럽트를 발생시킵니다. CPU는 인터럽트 벡터 테이블을 참조하여 하드 디스크 인터럽트 처리 루틴을 찾아 실행하고, 데이터 전송 완료 여부를 확인하고 버퍼를 관리하는 등의 작업을 수행합니다.
* **타이머 인터럽트:** 시스템 클록이 일정 시간마다 인터럽트를 발생시키면 CPU는 인터럽트 벡터 테이블을 참조하여 타이머 인터럽트 처리 루틴을 찾아 실행하고, 시스템 시간을 갱신하거나 스케줄링된 작업을 수행하는 등의 작업을 수행합니다.

#### 인터럽트 처리 루틴

`인터럽트 처리 루틴`이란 인터럽트가 발생했을 때, 시스템이 현재 수행하던 작업을 일시 중단하고 인터럽트를 처리하기 위해 실행되는 특별한 코드 블록을 의미합니다. 

**인터럽트 처리 루틴의 역할**

* **인터럽트 원인 파악:** 어떤 이유로 인터럽트가 발생했는지 정확히 파악합니다. (예: 하드 디스크 접근 완료, 타이머 만료, 장치 오류 등)
* **필요한 작업 수행:** 인터럽트 발생 원인에 따라 필요한 작업을 수행합니다. (예: 데이터 전송, 시스템 시간 갱신, 오류 처리 등)
* **원래 작업으로 복귀:** 인터럽트 처리가 완료되면 이전에 수행하던 작업으로 복귀합니다.

**인터럽트 처리 루틴의 중요성**

* **시스템 안정성:** 인터럽트를 적절히 처리하지 못하면 시스템이 불안정해지거나 오류가 발생할 수 있습니다.
* **실시간성:** 특정 인터럽트는 빠르게 처리되어야 하는 경우가 많습니다. (예: 타이머 인터럽트, 디스크 I/O 인터럽트)
* **효율성:** 인터럽트 처리 오버헤드를 최소화하여 시스템 성능을 향상시킬 수 있습니다.

**인터럽트 처리 루틴의 구조**

1. **인터럽트 벡터 테이블 참조:** 발생한 인터럽트의 번호를 이용하여 인터럽트 벡터 테이블에서 해당 인터럽트를 처리할 루틴의 주소를 찾습니다.
2. **현재 상태 저장:** 인터럽트가 발생하기 전의 CPU 상태(레지스터 값, 프로그램 카운터 등)를 저장합니다.
3. **인터럽트 처리:** 인터럽트 발생 원인을 파악하고 필요한 작업을 수행합니다.
4. **현재 상태 복원:** 저장된 CPU 상태를 복원합니다.
5. **인터럽트 처리 완료:** 인터럽트 처리를 완료하고 이전에 수행하던 작업으로 돌아갑니다.

**인터럽트 처리 루틴의 특징**

* **빠른 실행 속도:** 인터럽트는 예측할 수 없는 시점에 발생할 수 있으므로 빠르게 처리되어야 합니다.
* **짧은 실행 시간:** 인터럽트 처리 시간이 길어지면 시스템 응답성이 저하될 수 있습니다.
* **단순한 로직:** 인터럽트 처리 루틴은 특정 작업만을 수행하도록 설계되어야 합니다.
* **재입 가능성:** 여러 개의 인터럽트가 동시에 발생할 수 있으므로 인터럽트 처리 루틴은 재입 가능해야 합니다.

**인터럽트 처리 루틴의 예시**

* **타이머 인터럽트:** 시스템 시간을 갱신하고, 스케줄링된 작업을 수행합니다.
* **키보드 인터럽트:** 키보드 입력을 처리하고, 버퍼에 저장합니다.
* **하드 디스크 인터럽트:** 데이터 읽기/쓰기 작업 완료를 처리하고, 데이터를 버퍼에 복사하거나 메모리에 저장합니다.
* **네트워크 인터럽트:** 네트워크 패킷을 수신하거나 전송합니다.



### 4. 인터럽트의 우선순위

여러 인터럽트가 동시에 발생할 수 있기 때문에, 시스템은 인터럽트의 우선순위를 관리합니다. 우선순위가 높은 인터럽트는 우선 처리되며, 우선순위가 낮은 인터럽트는 대기하거나 나중에 처리됩니다. 우선순위 관리는 인터럽트 컨트롤러에 의해 이루어집니다.

**인터럽트 부여 방식**

* **하드웨어적인 방법:**
  * **인터럽트 컨트롤러:** 인터럽트 컨트롤러 내부에 우선순위 레지스터를 두고, 각 인터럽트에 우선순위를 할당합니다.
  * **벡터 테이블:** 인터럽트 벡터 테이블에서 우선순위에 따라 인터럽트 서비스 루틴의 주소를 배치합니다.
* **소프트웨어적인 방법:**
  * **우선순위 큐:** 발생한 인터럽트를 우선순위에 따라 큐에 넣고, 큐에서 가장 우선순위가 높은 인터럽트부터 처리합니다.
  * **디스패처:** 인터럽트 발생 시 디스패처가 인터럽트의 우선순위를 비교하여 처리 순서를 결정합니다.

**인터럽트 우선순위 테이블**

| 인터럽트 종류 | 우선순위 | 설명 |
|---|---|---|
| 전원 공급 이상 | 가장 높음 | 시스템 손상 방지 |
| CPU 오류 | 높음 | 시스템 오류 방지 |
| 타이머 인터럽트 | 중간 | 시스템 시간 유지, 스케줄링 |
| 디스크 I/O 인터럽트 | 중간 | 데이터 입출력 처리 |
| 네트워크 인터럽트 | 중간 | 네트워크 패킷 처리 |
| 키보드 인터럽트 | 낮음 | 사용자 입력 처리 |

### 5. 인터럽트의 장점

- **빠른 반응 시간**: 시스템이 실시간으로 중요한 이벤트에 즉시 반응할 수 있습니다.
- **효율적인 자원 관리**: CPU가 유휴 상태에서 폴링(polling)하는 대신 인터럽트를 기다림으로써 자원을 효율적으로 관리할 수 있습니다.
- **멀티태스킹 지원**: 다양한 작업을 효과적으로 처리할 수 있도록 도와줍니다.

### 6. 인터럽트의 단점

- **오버헤드**: 인터럽트 처리에는 문맥 전환과 같은 오버헤드가 수반될 수 있어 성능에 영향을 미칠 수 있습니다.
- **복잡성 증가**: 시스템 설계가 복잡해질 수 있으며, 인터럽트가 너무 자주 발생하면 시스템 성능이 저하될 수 있습니다.

인터럽트는 운영체제와 하드웨어 간의 중요한 상호작용을 가능하게 하는 핵심 메커니즘입니다. 이를 통해 시스템은 실시간으로 다양한 이벤트에 대응하고, 효율적으로 자원을 관리할 수 있습니다.
